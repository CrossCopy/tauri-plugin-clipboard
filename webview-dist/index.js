function e(e,t,n,r){return new(n||(n=Promise))((function(a,u){function i(e){try{c(r.next(e))}catch(e){u(e)}}function o(e){try{c(r.throw(e))}catch(e){u(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}c((r=r.apply(e,t||[])).next())}))}function t(e,t){var n,r,a,u,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function o(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}"function"==typeof SuppressedError&&SuppressedError;var n=Object.defineProperty,r=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})};function a(e,t=!1){let n=window.crypto.getRandomValues(new Uint32Array(1))[0],r=`_${n}`;return Object.defineProperty(window,r,{value:n=>(t&&Reflect.deleteProperty(window,r),e?.(n)),writable:!1,configurable:!0}),n}async function u(e,t={}){return new Promise(((n,r)=>{let u=a((e=>{n(e),Reflect.deleteProperty(window,`_${i}`)}),!0),i=a((e=>{r(e),Reflect.deleteProperty(window,`_${u}`)}),!0);window.__TAURI_IPC__({cmd:e,callback:u,error:i,...t})}))}function i(e,t="asset"){return window.__TAURI__.convertFileSrc(e,t)}async function o(e){return u("tauri",e)}r({},{convertFileSrc:()=>i,invoke:()=>u,transformCallback:()=>a});async function c(e,t){return o({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function l(e,t,n){return o({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:a(n)}}).then((t=>async()=>c(e,t)))}r({},{TauriEvent:()=>s,emit:()=>p,listen:()=>d,once:()=>f});var s=(e=>(e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress",e))(s||{});async function d(e,t){return l(e,null,t)}async function f(e,t){return async function(e,t,n){return l(e,t,(t=>{n(t),c(e,t.id).catch((()=>{}))}))}(e,null,t)}async function p(e,t){return async function(e,t,n){await o({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:t,payload:n}})}(e,void 0,t)}var _="text_changed",b="image_changed";function v(e){return u("plugin:clipboard|write_text",{text:e})}function w(){return u("plugin:clipboard|read_text")}function y(){return u("plugin:clipboard|read_image")}function h(e){return u("plugin:clipboard|read_image_binary").then((function(t){switch(e){case"int_array":default:return t;case"Uint8Array":return new Uint8Array(t);case"Blob":return new Blob([new Uint8Array(t)])}}))}function E(){return h("Blob").then((function(e){return URL.createObjectURL(e)}))}function D(e){return u("plugin:clipboard|write_image",{base64Image:e})}function m(n){void 0===n&&(n=500);var r="",a=!0;return setTimeout((function u(){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,w()];case 1:return e=t.sent(),r===e?[3,3]:[4,p(_,{value:e})];case 2:t.sent(),t.label=3;case 3:return r=e,[3,5];case 4:return t.sent(),[3,5];case 5:return a&&setTimeout(u,n),[2]}}))}))}),n),function(){a=!1}}function O(n){void 0===n&&(n=1e3);var r="",a=!0;return setTimeout((function u(){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,y()];case 1:return e=t.sent(),r===e?[3,3]:[4,p(b,{value:e})];case 2:t.sent(),t.label=3;case 3:return r=e,[3,5];case 4:return t.sent(),[3,5];case 5:return a&&setTimeout(u,n),[2]}}))}))}),n),function(){a=!1}}function g(){var n=this;return d("plugin:clipboard://clipboard-monitor/update",(function(r){return e(n,void 0,void 0,(function(){var e,n,a;return t(this,(function(t){switch(t.label){case 0:if("clipboard update"!==r.payload)return[3,12];t.label=1;case 1:return t.trys.push([1,5,,12]),[4,w()];case 2:return(e=t.sent())?[4,p(_,{value:e})]:[3,4];case 3:t.sent(),t.label=4;case 4:return[3,12];case 5:t.sent(),t.label=6;case 6:return t.trys.push([6,10,,11]),[4,y()];case 7:return(n=t.sent())?[4,p(b,{value:n})]:[3,9];case 8:t.sent(),t.label=9;case 9:return[3,11];case 10:return a=t.sent(),console.error(a),[3,11];case 11:return[3,12];case 12:return[2]}}))}))}))}export{b as IMAGE_CHANGED,_ as TEXT_CHANGED,O as listenImage,m as listenText,g as listenToClipboard,y as readImage,h as readImageBinary,E as readImageObjectURL,w as readText,D as writeImage,v as writeText};

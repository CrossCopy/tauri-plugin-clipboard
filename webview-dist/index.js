function e(e,t,n,r){return new(n||(n=Promise))((function(i,a){function u(e){try{c(r.next(e))}catch(e){a(e)}}function o(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,o)}c((r=r.apply(e,t||[])).next())}))}function t(e,t){var n,r,i,a,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(u=0)),u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}var n=Object.defineProperty,r=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})};function i(e,t=!1){let n=window.crypto.getRandomValues(new Uint32Array(1))[0],r=`_${n}`;return Object.defineProperty(window,r,{value:n=>(t&&Reflect.deleteProperty(window,r),null==e?void 0:e(n)),writable:!1,configurable:!0}),n}async function a(e,t={}){return new Promise(((n,r)=>{let a=i((e=>{n(e),Reflect.deleteProperty(window,`_${u}`)}),!0),u=i((e=>{r(e),Reflect.deleteProperty(window,`_${a}`)}),!0);window.__TAURI_IPC__({cmd:e,callback:a,error:u,...t})}))}function u(e,t="asset"){let n=encodeURIComponent(e);return navigator.userAgent.includes("Windows")?`https://${t}.localhost/${n}`:`${t}://localhost/${n}`}async function o(e){return a("tauri",e)}r({},{convertFileSrc:()=>u,invoke:()=>a,transformCallback:()=>i});async function c(e,t){return o({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function l(e,t,n){return o({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:i(n)}}).then((t=>async()=>c(e,t)))}r({},{TauriEvent:()=>s,emit:()=>_,listen:()=>d,once:()=>f});var s=(e=>(e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress",e))(s||{});async function d(e,t){return l(e,null,t)}async function f(e,t){return async function(e,t,n){return l(e,t,(t=>{n(t),c(e,t.id).catch((()=>{}))}))}(e,null,t)}async function _(e,t){return async function(e,t,n){await o({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:t,payload:n}})}(e,void 0,t)}var p="text_changed",v="image_changed";function h(e){return a("plugin:clipboard|write_text",{text:e})}function w(){return a("plugin:clipboard|read_text")}function b(){return a("plugin:clipboard|read_image")}function E(e){return a("plugin:clipboard|write_image",{base64Image:e})}function y(n){return void 0===n&&(n=500),e(this,void 0,void 0,(function(){var r;return t(this,(function(i){switch(i.label){case 0:return[4,w()];case 1:return r=i.sent(),setTimeout((function i(){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return[4,w()];case 1:return e=t.sent(),r===e?[3,3]:[4,_(p,{value:e})];case 2:t.sent(),t.label=3;case 3:return r=e,setTimeout(i,n),[2]}}))}))}),n),[2]}}))}))}function D(n){return void 0===n&&(n=1e3),e(this,void 0,void 0,(function(){var r;return t(this,(function(i){return r="",setTimeout((function i(){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,b()];case 1:return e=t.sent(),r===e?[3,3]:[4,_(v,{value:e})];case 2:t.sent(),t.label=3;case 3:return r=e,[3,5];case 4:return t.sent(),[3,5];case 5:return setTimeout(i,n),[2]}}))}))}),n),[2]}))}))}export{v as IMAGE_CHANGED,p as TEXT_CHANGED,D as listenImage,y as listenText,b as readImage,w as readText,E as writeImage,h as writeText};
